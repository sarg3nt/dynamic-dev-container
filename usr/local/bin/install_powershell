#!/bin/bash

set -euo pipefail
IFS=$'\n\t'

main() {
  source "/usr/bin/lib/sh/log.sh"

  log "Installing Powershell using mise" "blue"

  log "Adding the powershell plugin to mise" "green"
  mise plugin install powershell https://github.com/daveneeley/asdf-powershell-core

  log "Installing powershell" "green"
  mise use -g powershell@latest
}

if ! (return 0 2>/dev/null); then
  (main "$@")
fi
